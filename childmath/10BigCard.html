<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¼å…’æ•¸å­¸æ¨‚åœ’ï¼šèªè­˜åä½æ•¸èˆ‡å€‹ä½æ•¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            touch-action: manipulation; /* ç¦ç”¨é›™æ“Šç¸®æ”¾ï¼Œæå‡è¡Œå‹•è£ç½®é«”é©— */
        }
        .card-base {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            user-select: none;
        }
        .tens-card {
            width: 100px;
            height: 140px;
            font-size: 3rem;
            background: linear-gradient(145deg, #3b82f6, #60a5fa);
            border: 4px solid #2563eb;
        }
        .ones-card {
            width: 80px;
            height: 112px;
            font-size: 2.5rem;
            background: linear-gradient(145deg, #f97316, #fb923c);
            border: 4px solid #ea580c;
        }
        .card-base:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .card-base.selected {
            transform: scale(0.95);
            opacity: 0.5;
            cursor: not-allowed;
        }
        .slot {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 1rem;
            min-height: 160px;
            transition: background-color 0.3s;
        }
        .tens-slot {
            border: 4px dashed #3b82f6;
            background-color: #eff6ff;
        }
        .ones-slot {
            border: 4px dashed #f97316;
            background-color: #fff7ed;
        }
        /* å½ˆå‡ºè¦–çª—å‹•ç•« */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-amber-50 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8 space-y-6">
        
        <!-- æ¨™é¡Œ -->
        <header class="text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-700">å¹¼å…’æ•¸å­¸æ¨‚åœ’</h1>
            <p class="text-slate-500 mt-2 text-lg">å­¸ç¿’åä½æ•¸èˆ‡å€‹ä½æ•¸</p>
        </header>

        <!-- éŠæˆ²æ ¸å¿ƒå€åŸŸ -->
        <main class="space-y-8">
            <!-- é¡Œç›®æ•¸å­— -->
            <div class="bg-slate-100 rounded-lg p-4 text-center">
                <p class="text-lg text-slate-600">è«‹çµ„åˆå‡ºä¸‹æ–¹çš„æ•¸å­—ï¼š</p>
                <p id="target-number" class="text-7xl font-bold text-emerald-600 my-2">53</p>
            </div>

            <!-- ä½å€¼è¡¨æ ¼ -->
            <div>
                <h2 class="text-xl font-semibold text-center mb-4 text-slate-700">ä½å€¼è¡¨</h2>
                <div class="grid grid-cols-2 gap-4 md:gap-6">
                    <!-- åä½æ•¸æ”¾ç½®å€ -->
                    <div class="tens-slot slot" id="tens-drop-zone">
                        <div class="text-center">
                             <p class="font-bold text-xl text-blue-600">åä½æ•¸</p>
                             <p class="text-sm text-blue-500">(å¤§å¡ç‰‡)</p>
                        </div>
                    </div>
                    <!-- å€‹ä½æ•¸æ”¾ç½®å€ -->
                    <div class="ones-slot slot" id="ones-drop-zone">
                         <div class="text-center">
                            <p class="font-bold text-xl text-orange-600">å€‹ä½æ•¸</p>
                            <p class="text-sm text-orange-500">(å°å¡ç‰‡)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ•¸å­—å¡ç‰‡é¸æ“‡å€ -->
            <div class="space-y-6">
                <!-- åä½æ•¸å¡ç‰‡ -->
                <div>
                    <h3 class="text-lg font-semibold text-blue-600 mb-3 text-center">é¸æ“‡åä½æ•¸ï¼ˆå¤§å¡ç‰‡ï¼‰</h3>
                    <div id="tens-cards-container" class="flex flex-wrap justify-center gap-3">
                        <!-- JS å‹•æ…‹ç”Ÿæˆ -->
                    </div>
                </div>
                <!-- å€‹ä½æ•¸å¡ç‰‡ -->
                <div>
                    <h3 class="text-lg font-semibold text-orange-600 mb-3 text-center">é¸æ“‡å€‹ä½æ•¸ï¼ˆå°å¡ç‰‡ï¼‰</h3>
                    <div id="ones-cards-container" class="flex flex-wrap justify-center gap-3">
                        <!-- JS å‹•æ…‹ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <!-- æ“ä½œæŒ‰éˆ• -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4">
                <button id="check-answer" class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition-transform transform hover:scale-105">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button id="next-question" class="w-full sm:w-auto bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-lg transition-transform transform hover:scale-105">æ›ä¸€é¡Œ</button>
            </div>
        </main>
    </div>

    <!-- çµæœå½ˆå‡ºè¦–çª— -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div id="modal-content" class="modal bg-white rounded-2xl shadow-2xl p-8 text-center max-w-sm w-full space-y-4">
            <p id="modal-icon" class="text-8xl"></p>
            <p id="modal-message" class="text-2xl font-bold text-slate-700"></p>
            <button id="modal-close" class="mt-4 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg text-base transition-transform transform hover:scale-105">çŸ¥é“äº†</button>
        </div>
    </div>

<script>
    // DOM å…ƒç´ 
    const targetNumberEl = document.getElementById('target-number');
    const tensCardsContainer = document.getElementById('tens-cards-container');
    const onesCardsContainer = document.getElementById('ones-cards-container');
    const tensDropZone = document.getElementById('tens-drop-zone');
    const onesDropZone = document.getElementById('ones-drop-zone');
    const checkAnswerBtn = document.getElementById('check-answer');
    const nextQuestionBtn = document.getElementById('next-question');
    const modal = document.getElementById('modal');
    const modalIcon = document.getElementById('modal-icon');
    const modalMessage = document.getElementById('modal-message');
    const modalCloseBtn = document.getElementById('modal-close');

    // éŠæˆ²ç‹€æ…‹
    let currentNumber = 0;
    let correctTens = 0;
    let correctOnes = 0;
    let selectedTens = null;
    let selectedOnes = null;

    // åˆå§‹åŒ–éŠæˆ²
    function init() {
        createCards();
        generateNewQuestion();
        addEventListeners();
    }

    // å»ºç«‹æ•¸å­—å¡ç‰‡
    function createCards() {
        // å»ºç«‹åä½æ•¸å¡ç‰‡ (10, 20, ..., 90)
        for (let i = 1; i <= 9; i++) {
            const value = i * 10;
            const card = document.createElement('div');
            card.className = 'card-base tens-card';
            card.textContent = value;
            card.dataset.value = value;
            tensCardsContainer.appendChild(card);
        }
        // å»ºç«‹å€‹ä½æ•¸å¡ç‰‡ (0, 1, ..., 9)
        for (let i = 0; i <= 9; i++) {
            const value = i;
            const card = document.createElement('div');
            card.className = 'card-base ones-card';
            card.textContent = value;
            card.dataset.value = value;
            onesCardsContainer.appendChild(card);
        }
    }

    // æ–°å¢äº‹ä»¶ç›£è½
    function addEventListeners() {
        tensCardsContainer.addEventListener('click', handleCardSelection);
        onesCardsContainer.addEventListener('click', handleCardSelection);
        checkAnswerBtn.addEventListener('click', checkAnswer);
        nextQuestionBtn.addEventListener('click', generateNewQuestion);
        modalCloseBtn.addEventListener('click', hideModal);
    }
    
    // è™•ç†å¡ç‰‡é¸æ“‡
    function handleCardSelection(e) {
        const selectedCard = e.target.closest('.card-base');
        if (!selectedCard || selectedCard.classList.contains('selected')) return;

        const value = parseInt(selectedCard.dataset.value);
        
        if (selectedCard.classList.contains('tens-card')) {
            // å¦‚æœæ˜¯åä½æ•¸å¡ç‰‡
            if (selectedTens) {
                // å¦‚æœå·²ç¶“é¸éï¼Œå–æ¶ˆä¹‹å‰çš„é¸æ“‡
                tensCardsContainer.querySelector(`[data-value="${selectedTens}"]`).classList.remove('selected');
            }
            selectedTens = value;
            const cardClone = selectedCard.cloneNode(true);
            cardClone.classList.remove('selected');
            cardClone.style.cursor = 'default';
            tensDropZone.innerHTML = '';
            tensDropZone.appendChild(cardClone);
        } else if (selectedCard.classList.contains('ones-card')) {
            // å¦‚æœæ˜¯å€‹ä½æ•¸å¡ç‰‡
            if (selectedOnes !== null) {
                // å¦‚æœå·²ç¶“é¸éï¼Œå–æ¶ˆä¹‹å‰çš„é¸æ“‡
                onesCardsContainer.querySelector(`[data-value="${selectedOnes}"]`).classList.remove('selected');
            }
            selectedOnes = value;
            const cardClone = selectedCard.cloneNode(true);
            cardClone.classList.remove('selected');
            cardClone.style.cursor = 'default';
            onesDropZone.innerHTML = '';
            onesDropZone.appendChild(cardClone);
        }
        
        // æ›´æ–°é¸æ“‡æ¨£å¼
        updateSelectedStyles();
    }

    function updateSelectedStyles() {
        // å…ˆç§»é™¤æ‰€æœ‰ selected class
        tensCardsContainer.querySelectorAll('.card-base').forEach(c => c.classList.remove('selected'));
        onesCardsContainer.querySelectorAll('.card-base').forEach(c => c.classList.remove('selected'));

        // åŠ ä¸Š selected class çµ¦ç›®å‰é¸æ“‡çš„
        if(selectedTens) {
             tensCardsContainer.querySelector(`[data-value="${selectedTens}"]`).classList.add('selected');
        }
        if(selectedOnes !== null) {
             onesCardsContainer.querySelector(`[data-value="${selectedOnes}"]`).classList.add('selected');
        }
    }

    // ç”¢ç”Ÿæ–°é¡Œç›®
    function generateNewQuestion() {
        // ç”¢ç”Ÿ 10 åˆ° 99 ä¹‹é–“çš„éš¨æ©Ÿæ•¸å­—
        currentNumber = Math.floor(Math.random() * 90) + 10;
        correctTens = Math.floor(currentNumber / 10) * 10;
        correctOnes = currentNumber % 10;
        
        // æ›´æ–°é¡¯ç¤º
        targetNumberEl.textContent = currentNumber;
        
        // é‡ç½®ç‹€æ…‹
        resetSelection();
    }

    // é‡ç½®é¸æ“‡
    function resetSelection() {
        selectedTens = null;
        selectedOnes = null;

        // æ¸…ç©ºä½å€¼è¡¨
        tensDropZone.innerHTML = `<div class="text-center"><p class="font-bold text-xl text-blue-600">åä½æ•¸</p><p class="text-sm text-blue-500">(å¤§å¡ç‰‡)</p></div>`;
        onesDropZone.innerHTML = `<div class="text-center"><p class="font-bold text-xl text-orange-600">å€‹ä½æ•¸</p><p class="text-sm text-orange-500">(å°å¡ç‰‡)</p></div>`;

        // ç§»é™¤æ‰€æœ‰å¡ç‰‡çš„é¸æ“‡æ¨£å¼
        tensCardsContainer.querySelectorAll('.card-base').forEach(c => c.classList.remove('selected'));
        onesCardsContainer.querySelectorAll('.card-base').forEach(c => c.classList.remove('selected'));
    }

    // æª¢æŸ¥ç­”æ¡ˆ
    function checkAnswer() {
        if (selectedTens === null || selectedOnes === null) {
            showModal('ğŸ¤”', 'è¦é¸æ“‡åä½æ•¸å’Œå€‹ä½æ•¸å–”ï¼');
            return;
        }

        if (selectedTens === correctTens && selectedOnes === correctOnes) {
            showModal('ğŸ‰', 'ç­”å°äº†ï¼ä½ çœŸæ£’ï¼');
        } else {
            showModal('ğŸ˜Ÿ', 'å–”å–”ï¼Œå†æƒ³ä¸€ä¸‹ï¼');
        }
    }
    
    // é¡¯ç¤º/éš±è—å½ˆå‡ºè¦–çª—
    function showModal(icon, message) {
        modalIcon.textContent = icon;
        modalMessage.textContent = message;
        modal.classList.remove('hidden');
    }
    function hideModal() {
        modal.classList.add('hidden');
        if(modalIcon.textContent === 'ğŸ‰') {
             generateNewQuestion();
        }
    }

    // å•Ÿå‹•éŠæˆ²
    init();

</script>
</body>
</html>
