<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡¨æƒ…è·³æ ¼å­äº’å‹•éŠæˆ²</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è¨­å®š Tailwind é…ç½®å’Œå­—é«” -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans TC', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#6366f1', // Indigo 500
                        'secondary': '#facc15', // Amber 400
                        'accent': '#fb7185', // Rose 400
                    }
                }
            }
        }
    </script>
    <style>
        /* è‡ªå®šç¾©å‹•ç•«å’Œæ¨£å¼ */
        .game-grid {
            grid-template-columns: repeat(2, 1fr); /* ç¢ºä¿æ‰‹æ©Ÿä¸Šæœ‰å…©æ¬„ */
        }
        .expression-cell {
            transition: all 0.1s ease-in-out;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .expression-cell:hover:not(.active) {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        /* æ­£åœ¨è·³å‹•/é¸å–ä¸­çš„é«˜äº®æ•ˆæœ */
        .highlight {
            background-color: #fca5a5; /* Red 300 */
            transform: scale(1.05);
            border-color: #ef4444; /* Red 500 */
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.6);
        }
        /* æœ€çµ‚é¸å®šçµæœçš„é«˜äº®æ•ˆæœ */
        .active {
            background-color: #34d399; /* Emerald 400 */
            border-color: #059669; /* Emerald 600 */
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(52, 211, 153, 0.8);
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from {
                transform: scale(1.05);
                opacity: 1;
            }
            to {
                transform: scale(1.1);
                opacity: 0.9;
            }
        }

        .start-button {
            transition: all 0.2s ease;
        }
        .start-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background-color: #a5b4fc; /* Indigo 300 */
            transform: none;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-lg bg-white p-6 rounded-3xl shadow-2xl border border-gray-100">
        <h1 class="text-3xl font-bold text-center text-primary mb-2">è¡¨æƒ…è·³æ ¼å­æŒ‘æˆ°ï¼</h1>
        <p class="text-center text-gray-500 mb-6">é»æ“ŠæŒ‰éˆ•ï¼Œçœ‹çœ‹ä½ å¿…é ˆå®Œæˆå“ªç¨®è¡¨æƒ…ï¼</p>

        <!-- éŠæˆ²è¨Šæ¯å€åŸŸ -->
        <div id="message-box" class="bg-indigo-100 border-l-4 border-primary text-indigo-800 p-4 mb-6 rounded-lg shadow-inner text-center font-medium">
            é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹éŠæˆ²ã€‚
        </div>

        <!-- è¡¨æƒ…æ ¼å­å€åŸŸ (2x5 Grid) -->
        <div id="game-container" class="game-grid grid gap-4 mb-8">
            <!-- è¡¨æ ¼æœƒç”± JavaScript å¡«å…… -->
        </div>

        <!-- æ§åˆ¶æŒ‰éˆ• -->
        <div class="flex justify-center">
            <button id="start-button" onclick="startGame()" class="start-button bg-primary hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out">
                é–‹å§‹è·³æ ¼å­ï¼
            </button>
        </div>
    </div>

    <script type="text/javascript">
        // 1. å®šç¾©è¡¨æƒ…åˆ—è¡¨
        const expressions = [
            { name: "å“­å“­", emoji: "ğŸ˜¢", description: "å‡è£é›£éåœ°å“­å‡ºä¾†" },
            { name: "ç”Ÿæ°£", emoji: "ğŸ˜¡", description: "é¼“èµ·è‡‰é °ï¼Œåšå‡ºæœ€å…‡çš„è¡¨æƒ…" },
            { name: "é–‹å¿ƒ", emoji: "ğŸ˜„", description: "éœ²å‡ºå…«é¡†ç‰™é½’çš„ç‡¦çˆ›ç¬‘å®¹" },
            { name: "æ„›ä½ ", emoji: "ğŸ˜˜", description: "çµ¦é¡é ­ä¸€å€‹é£›å»æˆ–æ„›å¿ƒæ‰‹å‹¢" },
            { name: "å¯æ„›", emoji: "ğŸ˜Š", description: "çœ¨å–®çœ¼æˆ–è£èŒ" },
            { name: "ç„¡èŠ", emoji: "ğŸ¥±", description: "æ‰“å€‹å“ˆæ¬ ï¼Œçœ¼ç¥æ”¾ç©º" },
            { name: "ç™¼å‘†", emoji: "ğŸ˜¶", description: "çœ¼ç¥å‘†æ»¯ï¼Œå˜´å·´å¾®å¼µ" },
            { name: "å®‰éœ", emoji: "ğŸ¤«", description: "æ‰‹æŒ‡æ”¾åœ¨å˜´å”‡ä¸Šï¼Œå™“ï¼" },
            { name: "æ·±å‘¼å¸", emoji: "ğŸ˜®â€ğŸ’¨", description: "é–‰çœ¼æ·±å¸ä¸€å£æ°£ï¼Œå†æ…¢æ…¢åå‡º" },
            { name: "å˜Ÿå˜Ÿå˜´", emoji: "ğŸ˜š", description: "é›™å”‡å˜Ÿèµ·ï¼Œå‡è£è¦è¦ªå»" }
        ];

        let intervalId = null;
        let running = false;
        const gameContainer = document.getElementById('game-container');
        const startButton = document.getElementById('start-button');
        const messageBox = document.getElementById('message-box');

        // 2. åˆå§‹åŒ–éŠæˆ²æ ¼å­
        function renderGrid() {
            gameContainer.innerHTML = '';
            expressions.forEach((expr, index) => {
                const cell = document.createElement('div');
                cell.id = `expr-${index}`;
                cell.className = 'expression-cell flex flex-col items-center justify-center p-4 h-32 md:h-40 bg-white rounded-xl border-2 border-gray-200';
                
                cell.innerHTML = `
                    <span class="text-4xl md:text-5xl mb-1">${expr.emoji}</span>
                    <span class="font-bold text-lg text-gray-800">${expr.name}</span>
                `;
                gameContainer.appendChild(cell);
            });
        }

        // 3. éŠæˆ²ä¸»é‚è¼¯ï¼šé–‹å§‹è·³æ ¼å­
        function startGame() {
            if (running) return;
            running = true;
            startButton.disabled = true;
            messageBox.className = 'bg-yellow-100 border-l-4 border-secondary text-yellow-800 p-4 mb-6 rounded-lg shadow-inner text-center font-medium';
            messageBox.textContent = 'æ ¼å­æ­£åœ¨è·³å‹•ä¸­... æº–å‚™å¥½äº†å—ï¼Ÿ';
            
            // æ¸…é™¤ä¸Šæ¬¡çš„çµæœé«˜äº®
            document.querySelectorAll('.expression-cell').forEach(cell => {
                cell.classList.remove('highlight', 'active');
            });

            const totalCells = expressions.length;
            let currentIndex = 0;
            const speed = 100; // æ¯«ç§’ï¼Œåˆå§‹è·³å‹•é€Ÿåº¦

            // å•Ÿå‹•è·³å‹•æ•ˆæœ
            intervalId = setInterval(() => {
                // ç§»é™¤å‰ä¸€å€‹çš„é«˜äº®
                if (currentIndex > 0) {
                    document.getElementById(`expr-${currentIndex - 1}`).classList.remove('highlight');
                } else if (currentIndex === 0 && totalCells > 0) {
                    // å¦‚æœæ˜¯ç¬¬ä¸€å€‹æ ¼å­ï¼Œéœ€è¦ç§»é™¤ä¸Šä¸€å€‹ï¼ˆä¹Ÿå°±æ˜¯æœ€å¾Œä¸€å€‹ï¼‰çš„é«˜äº®
                    document.getElementById(`expr-${totalCells - 1}`).classList.remove('highlight');
                }

                // æ·»åŠ ç•¶å‰æ ¼å­çš„é«˜äº®
                const currentCell = document.getElementById(`expr-${currentIndex}`);
                currentCell.classList.add('highlight');

                // å¾ªç’°åˆ°ä¸‹ä¸€å€‹æ ¼å­
                currentIndex = (currentIndex + 1) % totalCells;
            }, speed);

            // éš¨æ©Ÿæ±ºå®šåœæ­¢æ™‚é–“ (2 åˆ° 4 ç§’)
            const stopTime = Math.random() * 2000 + 2000; // 2000ms to 4000ms

            setTimeout(stopGame, stopTime);
        }

        // 4. åœæ­¢éŠæˆ²ä¸¦é¡¯ç¤ºçµæœ
        function stopGame() {
            clearInterval(intervalId);
            
            // éš¨æ©Ÿé¸å–æœ€çµ‚çµæœ
            const finalIndex = Math.floor(Math.random() * expressions.length);
            const finalExpression = expressions[finalIndex];

            // ç¢ºä¿æœ€çµ‚çµæœè¢«é«˜äº®é¡¯ç¤º
            // ç”±æ–¼ setInterval å¯èƒ½åœåœ¨ä¸­é–“ï¼Œéœ€è¦æ‰‹å‹•è¨­å®šæœ€çµ‚çµæœçš„é«˜äº®
            document.querySelectorAll('.expression-cell').forEach(cell => {
                cell.classList.remove('highlight', 'active');
            });
            
            const finalCell = document.getElementById(`expr-${finalIndex}`);
            finalCell.classList.add('active');

            // é¡¯ç¤ºçµæœè¨Šæ¯
            messageBox.className = 'bg-green-100 border-l-4 border-green-500 text-green-800 p-4 mb-6 rounded-lg shadow-inner text-center font-medium';
            messageBox.innerHTML = `
                <span class="text-2xl font-extrabold">ğŸ‰ æ­å–œä½ ï¼è¢«é¸ä¸­çš„æ˜¯ï¼š${finalExpression.name} ${finalExpression.emoji}</span>
                <br>
                <span class="text-lg">${finalExpression.description}ï¼</span>
            `;

            // é‡ç½®ç‹€æ…‹
            running = false;
            startButton.disabled = false;
        }

        // é é¢è¼‰å…¥å®Œæˆå¾ŒåŸ·è¡Œ
        window.onload = renderGrid;
    </script>
</body>
</html>