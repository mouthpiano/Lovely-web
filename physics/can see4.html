<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>光學探索 - 互動式教學</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .experiment-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .experiment-title {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        /* 實驗一：手電筒照臉 */
        .flashlight-scene {
            position: relative;
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .person-face {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            opacity: 0;
            transition: opacity 0.3s ease;
            filter: contrast(1.3) brightness(1.2);
        }

        .flashlight-on .person-face {
            opacity: 1;
            animation: scaryAppear 0.5s ease-out;
        }

        @keyframes scaryAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            50% {
                opacity: 0.7;
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .flashlight-beam {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            background: radial-gradient(ellipse at center, rgba(255,255,200,0.8) 0%, rgba(255,255,200,0.3) 50%, transparent 100%);
            border-radius: 50%;
            transition: all 0.5s ease;
            transform-origin: bottom center;
        }

        .flashlight-on .flashlight-beam {
            width: 350px;
            height: 350px;
            bottom: -50px;
            transform: translateX(-50%);
        }

        .flashlight-on .person-face {
            opacity: 1;
        }

        .flashlight-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255,107,107,0.3);
        }

        .flashlight-button:hover {
            background: #ff5252;
            transform: translateX(-50%) translateY(-2px);
            box-shadow: 0 7px 20px rgba(255,107,107,0.4);
        }

        /* 實驗二：別墅場景 */
        .villa-scene {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 100%);
            border-radius: 15px;
            overflow: hidden;
            transition: background 0.8s ease;
        }

        .villa-scene.night {
            background: linear-gradient(to bottom, #1a1a2e 0%, #16213e 100%);
        }

        .mountains {
            position: absolute;
            bottom: 120px;
            width: 100%;
            height: 280px;
            background: linear-gradient(to bottom, #6b7280 0%, #4a5568 50%, #374151 100%);
            clip-path: polygon(0 100%, 8% 30%, 18% 50%, 28% 20%, 38% 40%, 48% 15%, 58% 35%, 68% 10%, 78% 30%, 88% 25%, 95% 45%, 100% 35%, 100% 100%);
            transition: all 0.8s ease;
            box-shadow: inset 0 -20px 40px rgba(0,0,0,0.3);
        }

        .villa-scene.night .mountains {
            background: linear-gradient(to bottom, #374151 0%, #2d3748 50%, #1f2937 100%);
        }

        .grass {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 120px;
            background: linear-gradient(to top, #15803d 0%, #22c55e 30%, #4ade80 60%, #86efac 100%);
            transition: all 0.8s ease;
        }

        .grass::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                rgba(34, 197, 94, 0.3) 2px,
                transparent 4px
            );
        }

        .villa-scene.night .grass {
            background: linear-gradient(to top, #0f2419 0%, #14532d 30%, #166534 60%, #15803d 100%);
        }

        .grass-light {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 120px;
            background: transparent;
            pointer-events: none;
            z-index: 1;
            transition: all 0.8s ease;
        }

        .villa.lit ~ .grass-light {
            background: radial-gradient(ellipse at center top, rgba(255, 245, 183, 0.3) 0%, rgba(255, 245, 183, 0.1) 50%, transparent 100%);
        }

        .lake {
            position: absolute;
            bottom: 120px;
            left: 20px;
            width: 100px;
            height: 70px;
            background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 30%, #7dd3fc 60%, #bae6fd 100%);
            border-radius: 50%;
            opacity: 0.9;
            transition: all 0.8s ease;
            box-shadow: inset 0 8px 16px rgba(0,0,0,0.2), 0 4px 12px rgba(14, 165, 233, 0.3);
        }

        .villa-scene.night .lake {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 30%, #60a5fa 60%, #93c5fd 100%);
        }

        .lake::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 20px;
            width: 16px;
            height: 10px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            animation: ripple1 4s infinite;
        }

        .lake::after {
            content: '';
            position: absolute;
            top: 25px;
            right: 25px;
            width: 12px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: ripple2 3.5s infinite 1s;
        }

        @keyframes ripple1 {
            0%, 100% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.3); opacity: 0.1; }
        }

        @keyframes ripple2 {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.2); opacity: 0.05; }
        }

        .villa {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            width: 500px;
            height: 320px;
            background: #f7fafc;
            border-radius: 15px;
            transition: all 0.8s ease;
            border: 3px solid #d69e2e;
        }

        .villa-scene.night .villa {
            background: #2d3748;
        }

        .villa-scene.night .villa > div:not(.window) {
            filter: brightness(0.3);
        }

        .villa-scene.night .villa svg {
            filter: brightness(0.3);
        }

        .villa.lit {
            background: #fff5b7 !important;
            box-shadow: 0 0 50px rgba(255, 245, 183, 0.8);
        }

        .villa.lit > div:not(.window) {
            filter: brightness(1) !important;
        }

        .villa.lit svg {
            filter: brightness(1) !important;
        }

        .window {
            position: absolute;
            width: 120px;
            height: 240px;
            background: rgba(173, 216, 230, 0.8);
            border: 4px solid #4a5568;
            border-radius: 8px;
        }

        .window.left {
            top: 60px;
            left: 40px;
        }

        .window.right {
            top: 60px;
            right: 40px;
        }

        .window.center {
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
        }

        .villa.lit .window {
            background: rgba(173, 216, 230, 0.8);
            border-color: #4a5568;
        }

        .window-reflection {
            position: absolute;
            width: 90px;
            height: 130px;
            opacity: 0;
            transition: opacity 0.5s ease;
            transform: scaleX(-1);
            filter: brightness(0.4) contrast(0.8);
        }

        .window-reflection.left {
            top: 110px;
            left: 55px;
        }

        .window-reflection.center {
            top: 110px;
            left: 50%;
            transform: translateX(-50%) scaleX(-1);
        }

        .window-reflection.right {
            top: 110px;
            right: 35px;
        }

        .villa.lit .window-reflection {
            opacity: 0.3;
        }

        .person-inside {
            position: absolute;
            top: 110px;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 130px;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .villa-scene.night .person-inside {
            opacity: 0;
        }

        .villa.lit .person-inside {
            opacity: 1;
        }

        .robber {
            position: absolute;
            bottom: 120px;
            right: 50px;
            width: 100px;
            height: 130px;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .villa-scene.night .robber {
            opacity: 0.7;
        }

        .villa.lit .robber {
            opacity: 1;
        }

        /* 心聲對話框 */
        .thought-bubble {
            position: absolute;
            background: white;
            border: 3px solid #333;
            border-radius: 20px;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: bold;
            color: #333;
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            max-width: 180px;
            text-align: center;
            line-height: 1.3;
        }

        .thought-bubble::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
        }

        .thought-bubble.rich-day {
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #fff5b7, #ffffff);
        }

        .thought-bubble.rich-day::before {
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid #333;
        }

        .thought-bubble.rich-night {
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #e2e8f0, #ffffff);
        }

        .thought-bubble.rich-night::before {
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid #333;
        }

        .thought-bubble.rich-lit {
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ffd700, #fff5b7);
            color: #8b4513;
        }

        .thought-bubble.rich-lit::before {
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid #333;
        }

        .thought-bubble.robber-day {
            bottom: 280px;
            right: 20px;
            background: linear-gradient(135deg, #ff6b6b, #ffffff);
            color: #8b0000;
        }

        .thought-bubble.robber-day::before {
            bottom: -15px;
            right: 30px;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid #333;
        }

        .thought-bubble.robber-night {
            bottom: 280px;
            right: 20px;
            background: linear-gradient(135deg, #4a5568, #e2e8f0);
            color: #1a202c;
        }

        .thought-bubble.robber-night::before {
            bottom: -15px;
            right: 30px;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid #333;
        }

        .thought-bubble.robber-lit {
            bottom: 280px;
            right: 20px;
            background: linear-gradient(135deg, #48bb78, #ffffff);
            color: #22543d;
        }

        .thought-bubble.robber-lit::before {
            bottom: -15px;
            right: 30px;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 15px solid #333;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
        }

        .control-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
        }

        .control-btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(66, 153, 225, 0.4);
        }

        .control-btn.active {
            background: #2b6cb0;
        }

        .explanation {
            background: #f7fafc;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
        }

        .explanation h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .explanation p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .dynamic-explanation {
            background: #e6fffa;
            border-left: 5px solid #38b2ac;
            padding: 20px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
            transition: all 0.5s ease;
        }

        .dynamic-explanation h3 {
            color: #38b2ac;
            margin-bottom: 10px;
        }

        .dynamic-explanation p {
            color: #2d3748;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        /* 實驗三：灰塵與光線樣式 */
        .dust-scene {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid #4a90e2;
        }

        .classroom-bg {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .blackboard {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 200px;
            height: 120px;
            background: #2d4a2d;
            border: 4px solid #8b4513;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .chalk-text {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 18px;
            font-family: 'Courier New', monospace;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.3);
        }

        .chalk-eraser {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 20px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .chalk-eraser:hover {
            transform: scale(1.1);
        }

        .eraser-body {
            width: 100%;
            height: 12px;
            background: linear-gradient(45deg, #8b4513, #a0522d);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .eraser-felt {
            width: 100%;
            height: 8px;
            background: #f5f5dc;
            border-radius: 0 0 4px 4px;
            margin-top: -2px;
        }

        .classroom-window {
            position: absolute;
            top: 30px;
            right: 50px;
            width: 150px;
            height: 200px;
        }

        .window-frame {
            width: 100%;
            height: 100%;
            background: #8b4513;
            border-radius: 8px;
            padding: 8px;
        }

        .window-glass {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(173, 216, 230, 0.8), rgba(135, 206, 235, 0.6));
            border-radius: 4px;
            position: relative;
        }

        .window-glass::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: #8b4513;
        }

        .window-glass::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 2px;
            height: 100%;
            background: #8b4513;
        }

        .sunlight-beam {
            position: absolute;
            top: 0;
            left: -20px;
            width: 300px;
            height: 400px;
            opacity: 0;
            transition: opacity 0.8s ease;
            pointer-events: none;
        }

        .sunlight-beam.active {
            opacity: 1;
        }

        /* 主要光束背景 */
        .sunlight-beam::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50px;
            width: 120px;
            height: 350px;
            background: linear-gradient(to bottom, 
                rgba(255, 215, 0, 0.3) 0%, 
                rgba(255, 255, 100, 0.25) 20%, 
                rgba(255, 255, 150, 0.2) 40%, 
                rgba(255, 255, 200, 0.15) 60%, 
                rgba(255, 255, 200, 0.1) 80%, 
                transparent 100%);
            transform: rotate(45deg);
            transform-origin: top center;
            border-radius: 60px;
            opacity: 0;
            animation: beamPulse 4s infinite ease-in-out;
        }

        .sunlight-beam.active::before {
            opacity: 1;
        }

        @keyframes beamPulse {
            0%, 100% { 
                opacity: 0.6; 
                transform: rotate(45deg) scale(1);
            }
            50% { 
                opacity: 1; 
                transform: rotate(45deg) scale(1.1);
            }
        }

        .light-ray {
            position: absolute;
            width: 6px;
            height: 350px;
            background: linear-gradient(to bottom, 
                rgba(255, 215, 0, 1) 0%, 
                rgba(255, 255, 100, 0.9) 20%, 
                rgba(255, 255, 150, 0.7) 40%, 
                rgba(255, 255, 200, 0.5) 60%, 
                rgba(255, 255, 200, 0.3) 80%, 
                transparent 100%);
            transform-origin: top center;
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.8), 0 0 20px rgba(255, 255, 100, 0.6);
        }

        .ray1 { left: 50px; transform: rotate(40deg); animation: lightShimmer 3s infinite; }
        .ray2 { left: 70px; transform: rotate(42deg); animation: lightShimmer 3s infinite 0.5s; }
        .ray3 { left: 90px; transform: rotate(45deg); animation: lightShimmer 3s infinite 1s; }
        .ray4 { left: 110px; transform: rotate(47deg); animation: lightShimmer 3s infinite 1.5s; }
        .ray5 { left: 130px; transform: rotate(50deg); animation: lightShimmer 3s infinite 2s; }

        @keyframes lightShimmer {
            0%, 100% { 
                opacity: 0.7; 
                filter: brightness(1);
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.8), 0 0 20px rgba(255, 255, 100, 0.6);
            }
            50% { 
                opacity: 1; 
                filter: brightness(1.3);
                box-shadow: 0 0 15px rgba(255, 215, 0, 1), 0 0 30px rgba(255, 255, 100, 0.8);
            }
        }

        .dust-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }

        .dust-particles.visible {
            opacity: 1;
        }

        /* 預設狀態：灰塵粒子不發光 */
        .dust-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(120, 120, 120, 1) 0%, rgba(100, 100, 100, 0.9) 40%, rgba(80, 80, 80, 0.7) 70%, rgba(60, 60, 60, 0.3) 90%, transparent 100%);
            border-radius: 50%;
            animation: dustFloat 12s infinite linear;
            box-shadow: 0 0 6px rgba(120, 120, 120, 0.6), 0 0 3px rgba(100, 100, 100, 0.4);
            opacity: 0.8;
        }

        /* 預設狀態：所有灰塵粒子都是灰色 */
        .dust-particles.visible .dust-particle {
            background: radial-gradient(circle, rgba(120, 120, 120, 1) 0%, rgba(100, 100, 100, 0.9) 40%, rgba(80, 80, 80, 0.7) 70%, rgba(60, 60, 60, 0.3) 90%, transparent 100%);
            box-shadow: 0 0 6px rgba(120, 120, 120, 0.6), 0 0 3px rgba(100, 100, 100, 0.4);
            animation: dustFloat 12s infinite linear;
        }

        /* 當粒子在光線範圍內時會發光 - 通過JavaScript動態控制 */
        .dust-particle.in-light {
            background: radial-gradient(circle, rgba(255, 215, 0, 1) 0%, rgba(255, 255, 100, 0.9) 30%, rgba(255, 255, 150, 0.8) 60%, rgba(255, 255, 200, 0.5) 80%, transparent 100%) !important;
            box-shadow: 0 0 30px rgba(255, 215, 0, 1), 0 0 20px rgba(255, 255, 100, 0.9), 0 0 15px rgba(255, 255, 150, 0.8) !important;
            animation: dustFloatGlow 12s infinite linear !important;
        }

        /* 散射光線 - 只在粒子有in-light類別時顯示 */
        .dust-particle::before,
        .dust-particle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* 主要散射光線 - 水平方向 */
        .dust-particle::before {
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, 
                rgba(255, 215, 0, 0.9) 0%, 
                rgba(255, 255, 100, 1) 20%, 
                rgba(255, 255, 150, 0.8) 40%, 
                rgba(255, 255, 200, 0.6) 60%, 
                rgba(255, 255, 150, 0.4) 80%, 
                transparent 100%);
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 25px rgba(255, 255, 100, 0.6);
            border-radius: 2px;
        }

        /* 次要散射光線 - 垂直方向 */
        .dust-particle::after {
            width: 3px;
            height: 60px;
            background: linear-gradient(180deg, 
                rgba(255, 215, 0, 0.8) 0%, 
                rgba(255, 255, 100, 0.9) 30%, 
                rgba(255, 255, 150, 0.7) 50%, 
                rgba(255, 255, 200, 0.5) 70%, 
                transparent 100%);
            transform: translate(-50%, -50%);
            box-shadow: 0 0 12px rgba(255, 215, 0, 0.6), 0 0 20px rgba(255, 255, 100, 0.4);
            border-radius: 2px;
        }

        /* 只有在光線中的粒子才顯示散射光線 */
        .dust-particle.in-light::before {
            opacity: 1 !important;
            animation: scatterBeam1 3s infinite ease-in-out !important;
        }

        .dust-particle.in-light::after {
            opacity: 1 !important;
            animation: scatterBeam2 3s infinite ease-in-out 0.5s !important;
        }

        /* 為不同的粒子添加不同的散射角度 */
        .dust-particle:nth-child(odd).in-light::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }

        .dust-particle:nth-child(even).in-light::before {
            transform: translate(-50%, -50%) rotate(-30deg);
        }

        .dust-particle:nth-child(3n).in-light::after {
            transform: translate(-50%, -50%) rotate(60deg);
            width: 50px;
            height: 2px;
        }

        @keyframes scatterBeam1 {
            0%, 100% { 
                opacity: 0.4; 
                transform: translate(-50%, -50%) scale(0.8);
                filter: brightness(1);
            }
            50% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.3);
                filter: brightness(1.5);
            }
        }

        @keyframes scatterBeam2 {
            0%, 100% { 
                opacity: 0.3; 
                transform: translate(-50%, -50%) scale(0.9);
                filter: brightness(1);
            }
            50% { 
                opacity: 0.9; 
                transform: translate(-50%, -50%) scale(1.2);
                filter: brightness(1.4);
            }
        }

        @keyframes dustFloatGlow {
            0% {
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(0.5);
                opacity: 0;
                filter: brightness(1.5);
            }
            5% {
                opacity: 1;
                transform: translateY(20px) translateX(5px) rotate(30deg) scale(1);
                filter: brightness(2);
            }
            15% {
                opacity: 1;
                transform: translateY(60px) translateX(15px) rotate(90deg) scale(1.2);
                filter: brightness(2.5);
            }
            50% {
                filter: brightness(2.2);
            }
            85% {
                opacity: 0.9;
                transform: translateY(350px) translateX(80px) rotate(300deg) scale(0.8);
                filter: brightness(1.8);
            }
            100% {
                transform: translateY(450px) translateX(120px) rotate(360deg) scale(0.3);
                opacity: 0;
                filter: brightness(1.5);
            }
        }

        @keyframes dustFloat {
            0% {
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(0.5);
                opacity: 0;
            }
            5% {
                opacity: 0.8;
                transform: translateY(20px) translateX(5px) rotate(30deg) scale(1);
            }
            15% {
                opacity: 1;
                transform: translateY(60px) translateX(15px) rotate(90deg) scale(1.1);
            }
            85% {
                opacity: 0.9;
                transform: translateY(350px) translateX(80px) rotate(300deg) scale(0.8);
            }
            100% {
                transform: translateY(450px) translateX(120px) rotate(360deg) scale(0.3);
                opacity: 0;
            }
        }

        .dust-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .dust-btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }

        .dust-btn:hover {
            background: #357abd;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(74, 144, 226, 0.4);
        }

        .dust-btn.active {
            background: #2d5aa0;
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.5);
        }

        .scene-status {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid #4a90e2;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .status-text {
            font-size: 1rem;
            color: #2d5aa0;
            font-weight: bold;
            text-align: center;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .experiment-section {
                padding: 20px;
            }
            
            .villa-scene, .flashlight-scene, .dust-scene {
                height: 300px;
            }
            
            .controls, .dust-controls {
                flex-direction: column;
                align-items: center;
            }

            .thought-bubble {
                font-size: 12px;
                padding: 8px 12px;
                max-width: 140px;
            }

            .blackboard {
                width: 150px;
                height: 100px;
            }

            .classroom-window {
                width: 120px;
                height: 160px;
            }

            .dust-btn {
                font-size: 0.8rem;
                padding: 10px 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔦 光學探索實驗室</h1>
            <p>透過互動實驗理解光與視覺的奧秘</p>
        </div>

        <!-- 實驗一：手電筒照臉 -->
        <div class="experiment-section">
            <h2 class="experiment-title">實驗一：黑暗中的發現</h2>
            <div class="flashlight-scene" id="flashlightScene">
                <div class="flashlight-beam"></div>
                <svg class="person-face" viewBox="0 0 100 100">
                    <!-- 臉部 -->
                    <circle cx="50" cy="45" r="35" fill="#fdbcb4"/>
                    <!-- 陰影效果 -->
                    <ellipse cx="50" cy="60" rx="30" ry="15" fill="rgba(0,0,0,0.3)"/>
                    <!-- 驚恐的大眼睛 -->
                    <ellipse cx="40" cy="35" rx="6" ry="8" fill="white"/>
                    <ellipse cx="60" cy="35" rx="6" ry="8" fill="white"/>
                    <circle cx="40" cy="35" r="4" fill="#333"/>
                    <circle cx="60" cy="35" r="4" fill="#333"/>
                    <circle cx="41" cy="33" r="1" fill="white"/>
                    <circle cx="61" cy="33" r="1" fill="white"/>
                    <!-- 張開的嘴巴 -->
                    <ellipse cx="50" cy="55" rx="8" ry="12" fill="#333"/>
                    <ellipse cx="50" cy="52" rx="6" ry="8" fill="#8b0000"/>
                    <!-- 牙齒 -->
                    <rect x="46" y="50" width="2" height="4" fill="white"/>
                    <rect x="48" y="49" width="2" height="5" fill="white"/>
                    <rect x="50" y="49" width="2" height="5" fill="white"/>
                    <rect x="52" y="50" width="2" height="4" fill="white"/>
                    <!-- 凌亂的頭髮 -->
                    <path d="M20 30 Q15 20 25 15 Q35 10 45 15 Q55 10 65 15 Q75 20 80 30" stroke="#2c1810" stroke-width="6" fill="none"/>
                    <path d="M25 25 Q20 15 30 12" stroke="#2c1810" stroke-width="4" fill="none"/>
                    <path d="M75 25 Q80 15 70 12" stroke="#2c1810" stroke-width="4" fill="none"/>
                    <!-- 眉毛 -->
                    <path d="M32 28 Q40 25 48 28" stroke="#2c1810" stroke-width="3" fill="none"/>
                    <path d="M52 28 Q60 25 68 28" stroke="#2c1810" stroke-width="3" fill="none"/>
                </svg>
                <button class="flashlight-button" onclick="toggleFlashlight()">🔦 按下手電筒</button>
            </div>
            <div class="explanation">
                <h3>🧠 科學原理</h3>
                <p><strong>為什麼黑暗中看不見東西？</strong></p>
                <p>• 視覺需要光線才能產生</p>
                <p>• 物體本身不發光，需要光源照射才能被看見</p>
                <p>• 手電筒提供光源，光線照射到人臉後反射進入我們的眼睛</p>
            </div>
        </div>

        <!-- 實驗二：別墅場景 -->
        <div class="experiment-section">
            <h2 class="experiment-title">實驗二：別墅裡的光學現象</h2>
            <div class="villa-scene" id="villaScene">
                <div class="mountains"></div>
                <div class="lake"></div>
                <div class="grass"></div>
                <div class="grass-light" id="grassLight"></div>
                <div class="villa" id="villa">
                    <!-- 屋頂裝飾 -->
                    <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); width: 60px; height: 30px; background: #d69e2e; clip-path: polygon(50% 0%, 0% 100%, 100% 100%);"></div>
                    <!-- 煙囪 -->
                    <div style="position: absolute; top: -15px; right: 80px; width: 20px; height: 25px; background: #8b4513; border-radius: 3px;"></div>
                    <!-- 華麗水晶燈 -->
                    <svg style="position: absolute; top: 15px; left: 50%; transform: translateX(-50%); width: 60px; height: 50px;" viewBox="0 0 60 50">
                        <!-- 天花板固定座 -->
                        <ellipse cx="30" cy="3" rx="8" ry="2" fill="#ffd700"/>
                        <rect x="28" y="1" width="4" height="4" fill="#b8860b"/>
                        <!-- 主體框架 -->
                        <ellipse cx="30" cy="8" rx="20" ry="4" fill="#ffd700" stroke="#b8860b" stroke-width="1"/>
                        <!-- 水晶吊飾第一層 -->
                        <polygon points="15,12 18,18 12,18" fill="#e6f7ff" opacity="0.9"/>
                        <polygon points="22,12 25,18 19,18" fill="#e6f7ff" opacity="0.9"/>
                        <polygon points="30,12 33,20 27,20" fill="#e6f7ff" opacity="0.9"/>
                        <polygon points="38,12 41,18 35,18" fill="#e6f7ff" opacity="0.9"/>
                        <polygon points="45,12 48,18 42,18" fill="#e6f7ff" opacity="0.9"/>
                        <!-- 水晶吊飾第二層 -->
                        <polygon points="18,20 21,28 15,28" fill="#cce7ff" opacity="0.8"/>
                        <polygon points="26,20 29,30 23,30" fill="#cce7ff" opacity="0.8"/>
                        <polygon points="34,20 37,30 31,30" fill="#cce7ff" opacity="0.8"/>
                        <polygon points="42,20 45,28 39,28" fill="#cce7ff" opacity="0.8"/>
                        <!-- 中央大水晶 -->
                        <polygon points="30,22 35,35 25,35" fill="#b3d9ff" opacity="0.9"/>
                        <!-- 水晶反射光 -->
                        <line x1="15" y1="15" x2="17" y2="17" stroke="#ffffff" stroke-width="1" opacity="0.8"/>
                        <line x1="30" y1="16" x2="32" y2="18" stroke="#ffffff" stroke-width="1" opacity="0.8"/>
                        <line x1="45" y1="15" x2="47" y2="17" stroke="#ffffff" stroke-width="1" opacity="0.8"/>
                        <line x1="30" y1="28" x2="32" y2="30" stroke="#ffffff" stroke-width="1" opacity="0.8"/>
                        <!-- 金色鏈條 -->
                        <line x1="30" y1="8" x2="15" y2="15" stroke="#ffd700" stroke-width="0.8"/>
                        <line x1="30" y1="8" x2="22" y2="15" stroke="#ffd700" stroke-width="0.8"/>
                        <line x1="30" y1="8" x2="30" y2="16" stroke="#ffd700" stroke-width="0.8"/>
                        <line x1="30" y1="8" x2="38" y2="15" stroke="#ffd700" stroke-width="0.8"/>
                        <line x1="30" y1="8" x2="45" y2="15" stroke="#ffd700" stroke-width="0.8"/>
                        <!-- 發光效果 -->
                        <circle cx="30" cy="20" r="25" fill="url(#chandelier-glow)" opacity="0.3"/>
                        <defs>
                            <radialGradient id="chandelier-glow">
                                <stop offset="0%" stop-color="#fff5b7"/>
                                <stop offset="100%" stop-color="transparent"/>
                            </radialGradient>
                        </defs>
                    </svg>
                    <!-- 精緻大理石柱子 -->
                    <div style="position: absolute; top: 40px; left: 25px; width: 20px; height: 180px; background: linear-gradient(90deg, #f8f8ff, #e6e6fa, #dcdcdc, #e6e6fa, #f8f8ff); border-radius: 10px; box-shadow: 2px 0 8px rgba(0,0,0,0.2);"></div>
                    <!-- 左柱頂部裝飾 -->
                    <div style="position: absolute; top: 35px; left: 20px; width: 30px; height: 12px; background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700); border-radius: 6px;"></div>
                    <!-- 左柱底部裝飾 -->
                    <div style="position: absolute; top: 215px; left: 20px; width: 30px; height: 12px; background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700); border-radius: 6px;"></div>
                    <!-- 左柱大理石紋理 -->
                    <div style="position: absolute; top: 60px; left: 27px; width: 16px; height: 2px; background: #d3d3d3; opacity: 0.6;"></div>
                    <div style="position: absolute; top: 100px; left: 26px; width: 18px; height: 1px; background: #c0c0c0; opacity: 0.5;"></div>
                    <div style="position: absolute; top: 140px; left: 28px; width: 14px; height: 2px; background: #d3d3d3; opacity: 0.6;"></div>
                    <div style="position: absolute; top: 180px; left: 27px; width: 16px; height: 1px; background: #c0c0c0; opacity: 0.5;"></div>
                    
                    <div style="position: absolute; top: 40px; right: 25px; width: 20px; height: 180px; background: linear-gradient(90deg, #f8f8ff, #e6e6fa, #dcdcdc, #e6e6fa, #f8f8ff); border-radius: 10px; box-shadow: -2px 0 8px rgba(0,0,0,0.2);"></div>
                    <!-- 右柱頂部裝飾 -->
                    <div style="position: absolute; top: 35px; right: 20px; width: 30px; height: 12px; background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700); border-radius: 6px;"></div>
                    <!-- 右柱底部裝飾 -->
                    <div style="position: absolute; top: 215px; right: 20px; width: 30px; height: 12px; background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700); border-radius: 6px;"></div>
                    <!-- 右柱大理石紋理 -->
                    <div style="position: absolute; top: 60px; right: 27px; width: 16px; height: 2px; background: #d3d3d3; opacity: 0.6;"></div>
                    <div style="position: absolute; top: 100px; right: 26px; width: 18px; height: 1px; background: #c0c0c0; opacity: 0.5;"></div>
                    <div style="position: absolute; top: 140px; right: 28px; width: 14px; height: 2px; background: #d3d3d3; opacity: 0.6;"></div>
                    <div style="position: absolute; top: 180px; right: 27px; width: 16px; height: 1px; background: #c0c0c0; opacity: 0.5;"></div>
                    <!-- 豪華波斯地毯 -->
                    <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 220px; height: 35px; background: linear-gradient(45deg, #8b0000, #dc143c, #b22222, #dc143c, #8b0000); border-radius: 18px; border: 3px solid #ffd700; box-shadow: 0 4px 12px rgba(0,0,0,0.3);"></div>
                    <!-- 地毯花紋 -->
                    <div style="position: absolute; bottom: 32px; left: 50%; transform: translateX(-50%); width: 40px; height: 8px; background: #ffd700; border-radius: 4px;"></div>
                    <div style="position: absolute; bottom: 32px; left: 50%; transform: translateX(-80px); width: 25px; height: 6px; background: #ffed4e; border-radius: 3px;"></div>
                    <div style="position: absolute; bottom: 32px; left: 50%; transform: translateX(55px); width: 25px; height: 6px; background: #ffed4e; border-radius: 3px;"></div>
                    <div style="position: absolute; bottom: 25px; left: 50%; transform: translateX(-40px); width: 15px; height: 4px; background: #ffd700; border-radius: 2px;"></div>
                    <div style="position: absolute; bottom: 25px; left: 50%; transform: translateX(25px); width: 15px; height: 4px; background: #ffd700; border-radius: 2px;"></div>
                    <!-- 地毯流蘇 -->
                    <div style="position: absolute; bottom: 17px; left: 50%; transform: translateX(-110px); width: 2px; height: 8px; background: #ffd700;"></div>
                    <div style="position: absolute; bottom: 17px; left: 50%; transform: translateX(-105px); width: 2px; height: 6px; background: #ffd700;"></div>
                    <div style="position: absolute; bottom: 17px; left: 50%; transform: translateX(-100px); width: 2px; height: 8px; background: #ffd700;"></div>
                    <div style="position: absolute; bottom: 17px; left: 50%; transform: translateX(108px); width: 2px; height: 8px; background: #ffd700;"></div>
                    <div style="position: absolute; bottom: 17px; left: 50%; transform: translateX(103px); width: 2px; height: 6px; background: #ffd700;"></div>
                    <div style="position: absolute; bottom: 17px; left: 50%; transform: translateX(98px); width: 2px; height: 8px; background: #ffd700;"></div>
                    <div class="window left">
                    </div>
                    <div class="window center">
                    </div>
                    <div class="window right">
                        <svg class="window-reflection right" viewBox="0 0 60 90">
                            <!-- 富豪的頭部 -->
                            <circle cx="30" cy="20" r="12" fill="#fdbcb4"/>
                            <!-- 高級西裝身體 -->
                            <rect x="20" y="32" width="20" height="35" fill="#1a202c"/>
                            <!-- 白襯衫 -->
                            <rect x="23" y="35" width="14" height="30" fill="white"/>
                            <!-- 金色領帶 -->
                            <rect x="28" y="35" width="4" height="22" fill="#ffd700"/>
                            <circle cx="30" cy="37" r="1" fill="#ffed4e"/>
                            
                            <!-- 左手臂 -->
                            <ellipse cx="15" cy="42" rx="3" ry="12" fill="#1a202c"/>
                            <!-- 左手 -->
                            <circle cx="15" cy="54" r="3.5" fill="#fdbcb4"/>
                            <!-- 左手手指 -->
                            <ellipse cx="13" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                            <ellipse cx="15" cy="57" rx="1" ry="2.5" fill="#fdbcb4"/>
                            <ellipse cx="17" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                            <!-- 金錶 -->
                            <rect x="12" y="50" width="6" height="4" fill="#ffd700" rx="2"/>
                            <circle cx="15" cy="52" r="2" fill="#ffed4e"/>
                            
                            <!-- 右手臂 -->
                            <ellipse cx="45" cy="42" rx="3" ry="12" fill="#1a202c"/>
                            <!-- 右手 -->
                            <circle cx="45" cy="54" r="3.5" fill="#fdbcb4"/>
                            <!-- 右手手指 -->
                            <ellipse cx="43" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                            <ellipse cx="45" cy="57" rx="1" ry="2.5" fill="#fdbcb4"/>
                            <ellipse cx="47" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                            <!-- 金戒指 -->
                            <circle cx="47" cy="55" r="1.5" fill="#ffd700"/>
                            <!-- 金色袖扣 -->
                            <circle cx="42" cy="50" r="1" fill="#ffd700"/>
                            
                            <!-- 西裝褲 -->
                            <rect x="22" y="67" width="16" height="15" fill="#1a202c"/>
                            
                            <!-- 左腿 -->
                            <rect x="23" y="82" width="6" height="8" fill="#1a202c"/>
                            <!-- 左腳 -->
                            <ellipse cx="26" cy="88" rx="4" ry="2" fill="#1a1a1a"/>
                            
                            <!-- 右腿 -->
                            <rect x="31" y="82" width="6" height="8" fill="#1a202c"/>
                            <!-- 右腳 -->
                            <ellipse cx="34" cy="88" rx="4" ry="2" fill="#1a1a1a"/>
                            
                            <!-- 眼睛 -->
                            <circle cx="26" cy="17" r="1.5" fill="#333"/>
                            <circle cx="34" cy="17" r="1.5" fill="#333"/>
                            <!-- 滿意的微笑 -->
                            <path d="M25 23 Q30 26 35 23" stroke="#333" stroke-width="1.5" fill="none"/>
                            <!-- 整齊的頭髮 -->
                            <path d="M18 14 Q30 8 42 14" stroke="#4a5568" stroke-width="6" fill="none"/>
                            <!-- 金框眼鏡 -->
                            <circle cx="26" cy="17" r="4" stroke="#ffd700" stroke-width="1" fill="none"/>
                            <circle cx="34" cy="17" r="4" stroke="#ffd700" stroke-width="1" fill="none"/>
                            <line x1="30" y1="17" x2="30" y2="17" stroke="#ffd700" stroke-width="1"/>
                            <!-- 金項鍊 -->
                            <ellipse cx="30" cy="32" rx="8" ry="2" stroke="#ffd700" stroke-width="2" fill="none"/>
                            <!-- 西裝口袋 -->
                            <rect x="22" y="45" width="6" height="8" fill="#2d3748"/>
                            <!-- 鑽石胸針 -->
                            <polygon points="30,40 32,42 30,44 28,42" fill="#e2e8f0"/>
                            <circle cx="30" cy="42" r="0.5" fill="#cbd5e0"/>
                        </svg>
                    </div>
                    <svg class="person-inside" viewBox="0 0 60 90" style="position: absolute; top: 110px; left: 80px; width: 90px; height: 130px;">
                        <!-- 富豪的頭部 -->
                        <circle cx="30" cy="20" r="12" fill="#fdbcb4"/>
                        <!-- 高級西裝身體 -->
                        <rect x="20" y="32" width="20" height="35" fill="#1a202c"/>
                        <!-- 白襯衫 -->
                        <rect x="23" y="35" width="14" height="30" fill="white"/>
                        <!-- 金色領帶 -->
                        <rect x="28" y="35" width="4" height="22" fill="#ffd700"/>
                        <circle cx="30" cy="37" r="1" fill="#ffed4e"/>
                        
                        <!-- 左手臂 -->
                        <ellipse cx="15" cy="42" rx="3" ry="12" fill="#1a202c"/>
                        <!-- 左手 -->
                        <circle cx="15" cy="54" r="3.5" fill="#fdbcb4"/>
                        <!-- 左手手指 -->
                        <ellipse cx="13" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                        <ellipse cx="15" cy="57" rx="1" ry="2.5" fill="#fdbcb4"/>
                        <ellipse cx="17" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                        <!-- 金錶 -->
                        <rect x="12" y="50" width="6" height="4" fill="#ffd700" rx="2"/>
                        <circle cx="15" cy="52" r="2" fill="#ffed4e"/>
                        
                        <!-- 右手臂 -->
                        <ellipse cx="45" cy="42" rx="3" ry="12" fill="#1a202c"/>
                        <!-- 右手 -->
                        <circle cx="45" cy="54" r="3.5" fill="#fdbcb4"/>
                        <!-- 右手手指 -->
                        <ellipse cx="43" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                        <ellipse cx="45" cy="57" rx="1" ry="2.5" fill="#fdbcb4"/>
                        <ellipse cx="47" cy="56" rx="1" ry="2" fill="#fdbcb4"/>
                        <!-- 金戒指 -->
                        <circle cx="47" cy="55" r="1.5" fill="#ffd700"/>
                        <!-- 金色袖扣 -->
                        <circle cx="42" cy="50" r="1" fill="#ffd700"/>
                        
                        <!-- 西裝褲 -->
                        <rect x="22" y="67" width="16" height="15" fill="#1a202c"/>
                        
                        <!-- 左腿 -->
                        <rect x="23" y="82" width="6" height="8" fill="#1a202c"/>
                        <!-- 左腳 -->
                        <ellipse cx="26" cy="88" rx="4" ry="2" fill="#1a1a1a"/>
                        
                        <!-- 右腿 -->
                        <rect x="31" y="82" width="6" height="8" fill="#1a202c"/>
                        <!-- 右腳 -->
                        <ellipse cx="34" cy="88" rx="4" ry="2" fill="#1a1a1a"/>
                        
                        <!-- 眼睛 -->
                        <circle cx="26" cy="17" r="1.5" fill="#333"/>
                        <circle cx="34" cy="17" r="1.5" fill="#333"/>
                        <!-- 滿意的微笑 -->
                        <path d="M25 23 Q30 26 35 23" stroke="#333" stroke-width="1.5" fill="none"/>
                        <!-- 整齊的頭髮 -->
                        <path d="M18 14 Q30 8 42 14" stroke="#4a5568" stroke-width="6" fill="none"/>
                        <!-- 金框眼鏡 -->
                        <circle cx="26" cy="17" r="4" stroke="#ffd700" stroke-width="1" fill="none"/>
                        <circle cx="34" cy="17" r="4" stroke="#ffd700" stroke-width="1" fill="none"/>
                        <line x1="30" y1="17" x2="30" y2="17" stroke="#ffd700" stroke-width="1"/>
                        <!-- 金項鍊 -->
                        <ellipse cx="30" cy="32" rx="8" ry="2" stroke="#ffd700" stroke-width="2" fill="none"/>
                        <!-- 西裝口袋 -->
                        <rect x="22" y="45" width="6" height="8" fill="#2d3748"/>
                        <!-- 鑽石胸針 -->
                        <polygon points="30,40 32,42 30,44 28,42" fill="#e2e8f0"/>
                        <circle cx="30" cy="42" r="0.5" fill="#cbd5e0"/>
                    </svg>
                </div>
                <svg class="robber" viewBox="0 0 80 100">
                    <!-- 小偷的頭部 -->
                    <circle cx="35" cy="18" r="11" fill="#fdbcb4"/>
                    <!-- 黑色毛帽 -->
                    <ellipse cx="35" cy="11" rx="12" ry="7" fill="#1a1a1a"/>
                    <rect x="23" y="7" width="24" height="10" fill="#1a1a1a"/>
                    <!-- 面罩 -->
                    <rect x="24" y="14" width="22" height="12" fill="#1a1a1a" rx="3"/>
                    <rect x="23" y="13" width="24" height="2" fill="#333"/>
                    <rect x="23" y="25" width="24" height="2" fill="#333"/>
                    <!-- 眼睛洞 -->
                    <ellipse cx="30" cy="18" rx="3" ry="2.5" fill="#fdbcb4"/>
                    <ellipse cx="40" cy="18" rx="3" ry="2.5" fill="#fdbcb4"/>
                    <circle cx="30" cy="18" r="1.5" fill="#333"/>
                    <circle cx="40" cy="18" r="1.5" fill="#333"/>
                    <!-- 邪惡的眼神 -->
                    <circle cx="29.5" cy="17.5" r="0.4" fill="red"/>
                    <circle cx="39.5" cy="17.5" r="0.4" fill="red"/>
                    <!-- 嘴巴洞 -->
                    <ellipse cx="35" cy="22" rx="2" ry="1.5" fill="#1a1a1a"/>
                    
                    <!-- 身體（完整連接） -->
                    <ellipse cx="35" cy="40" rx="10" ry="18" fill="#2d2d2d"/>
                    <!-- 黑色褲子 -->
                    <ellipse cx="35" cy="65" rx="8" ry="15" fill="#1a1a1a"/>
                    
                    <!-- 左手臂（遮眼偷看） -->
                    <ellipse cx="22" cy="35" rx="3" ry="10" fill="#2d2d2d" transform="rotate(-30 22 35)"/>
                    <circle cx="18" cy="30" r="3" fill="#fdbcb4"/>
                    
                    <!-- 右手臂（拿工具） -->
                    <ellipse cx="48" cy="38" rx="3" ry="12" fill="#2d2d2d" transform="rotate(20 48 38)"/>
                    <circle cx="52" cy="32" r="3" fill="#fdbcb4"/>
                    <!-- 撬棍 -->
                    <rect x="53" y="28" width="1.5" height="10" fill="#c0c0c0" transform="rotate(20 53 33)"/>
                    <circle cx="54" cy="27" r="1" fill="#c0c0c0"/>
                    
                    <!-- 左腿（抬起躡手躡腳） -->
                    <ellipse cx="28" cy="78" rx="4" ry="12" fill="#1a1a1a" transform="rotate(-15 28 78)"/>
                    <ellipse cx="25" cy="88" rx="5" ry="3" fill="#1a1a1a" transform="rotate(-15 25 88)"/>
                    
                    <!-- 右腿（支撐） -->
                    <ellipse cx="42" cy="82" rx="4" ry="14" fill="#1a1a1a"/>
                    <ellipse cx="42" cy="94" rx="5" ry="3" fill="#1a1a1a"/>
                    
                    <!-- 偷竊工具袋 -->
                    <rect x="40" y="45" width="8" height="10" fill="#4a4a4a" rx="2"/>
                    <rect x="41" y="43" width="6" height="4" fill="#666"/>
                    
                    <!-- 面罩縫線 -->
                    <line x1="26" y1="16" x2="44" y2="16" stroke="#666" stroke-width="0.6"/>
                    <line x1="26" y1="20" x2="44" y2="20" stroke="#666" stroke-width="0.6"/>
                    <line x1="26" y1="24" x2="44" y2="24" stroke="#666" stroke-width="0.6"/>
                    
                    <!-- 偷偷摸摸動作線 -->
                    <path d="M15 50 Q20 45 25 50" stroke="#999" stroke-width="0.8" fill="none" opacity="0.6"/>
                    <path d="M10 65 Q15 60 20 65" stroke="#999" stroke-width="0.8" fill="none" opacity="0.6"/>
                </svg>

                <!-- 心聲對話框 -->
                <div class="thought-bubble rich-day" id="richDayThought">
                    😊 陽光真好！<br>今天心情不錯呢～
                </div>
                <div class="thought-bubble rich-night" id="richNightThought">
                    😴 夜深了...<br>該休息了
                </div>
                <div class="thought-bubble rich-lit" id="richLitThought">
                    🤔 外面好像<br>有什麼動靜？
                </div>
                <div class="thought-bubble robber-day" id="robberDayThought">
                    😰 糟糕！<br>被發現了！
                </div>
                <div class="thought-bubble robber-night" id="robberNightThought">
                    😈 太好了！<br>沒人看得見我
                </div>
                <div class="thought-bubble robber-lit" id="robberLitThought">
                    😍 完美！<br>可以看清裡面了！
                </div>

                <div class="controls">
                    <button class="control-btn" onclick="setTime('day')">☀️ 白天</button>
                    <button class="control-btn" onclick="setTime('night')">🌙 夜晚</button>
                    <button class="control-btn" onclick="toggleLight()">💡 開關燈</button>
                </div>
            </div>

            <!-- 動態科學原理解釋 -->
            <div class="dynamic-explanation" id="dynamicExplanation">
                <h3>🔬 當前狀態的科學原理</h3>
                <p id="explanationText">
                    <strong>☀️ 白天模式：</strong><br>
                    • 太陽光充足，光線從各個方向照射<br>
                    • 富豪和小偷都能清楚看見彼此<br>
                    • 這時候小偷很容易被發現，所以他很緊張！
                </p>
            </div>

            <div class="explanation">
                <h3>🧠 完整光學原理</h3>
                <p><strong>三種不同狀態的視覺效果：</strong></p>
                <p>• <strong>白天：</strong>太陽光充足，雙方都能看見對方</p>
                <p>• <strong>夜晚無燈：</strong>沒有光源，雙方都看不見對方</p>
                <p>• <strong>夜晚開燈：</strong>室內有光源，產生「單向視覺」效果</p>
                <p><strong>🔍 關鍵概念：</strong>視覺需要光線，光線的方向性決定了誰能看見誰！</p>
            </div>
        </div>

        <!-- 實驗三：灰塵與光線 -->
        <div class="experiment-section">
            <h2 class="experiment-title">實驗三：看見光線的秘密</h2>
            <div class="dust-scene" id="dustScene">
                <!-- 教室背景 -->
                <div class="classroom-bg">
                    <!-- 黑板 -->
                    <div class="blackboard">
                        <div class="chalk-text">光學實驗</div>
                        <div class="chalk-eraser" id="chalkEraser">
                            <div class="eraser-body"></div>
                            <div class="eraser-felt"></div>
                        </div>
                    </div>
                    
                    <!-- 窗戶 -->
                    <div class="classroom-window">
                        <div class="window-glass"></div>
                        <div class="sunlight-beam" id="sunlightBeam">
                            <div class="light-ray ray1"></div>
                            <div class="light-ray ray2"></div>
                            <div class="light-ray ray3"></div>
                            <div class="light-ray ray4"></div>
                            <div class="light-ray ray5"></div>
                        </div>
                    </div>
                    
                    <!-- 灰塵粒子 -->
                    <div class="dust-particles" id="dustParticles">
                        <div class="dust-particle" style="left: 20%; top: 30%; animation-delay: 0s;"></div>
                        <div class="dust-particle" style="left: 25%; top: 45%; animation-delay: 0.3s;"></div>
                        <div class="dust-particle" style="left: 30%; top: 35%; animation-delay: 0.6s;"></div>
                        <div class="dust-particle" style="left: 35%; top: 50%; animation-delay: 0.9s;"></div>
                        <div class="dust-particle" style="left: 40%; top: 40%; animation-delay: 1.2s;"></div>
                        <div class="dust-particle" style="left: 45%; top: 55%; animation-delay: 1.5s;"></div>
                        <div class="dust-particle" style="left: 50%; top: 45%; animation-delay: 1.8s;"></div>
                        <div class="dust-particle" style="left: 55%; top: 35%; animation-delay: 2.1s;"></div>
                        <div class="dust-particle" style="left: 60%; top: 50%; animation-delay: 2.4s;"></div>
                        <div class="dust-particle" style="left: 65%; top: 40%; animation-delay: 2.7s;"></div>
                        <div class="dust-particle" style="left: 70%; top: 55%; animation-delay: 3s;"></div>
                        <div class="dust-particle" style="left: 75%; top: 45%; animation-delay: 3.3s;"></div>
                        
                        <!-- 第二批粒子 -->
                        <div class="dust-particle" style="left: 22%; top: 60%; animation-delay: 0.2s;"></div>
                        <div class="dust-particle" style="left: 28%; top: 25%; animation-delay: 0.5s;"></div>
                        <div class="dust-particle" style="left: 33%; top: 65%; animation-delay: 0.8s;"></div>
                        <div class="dust-particle" style="left: 38%; top: 30%; animation-delay: 1.1s;"></div>
                        <div class="dust-particle" style="left: 43%; top: 70%; animation-delay: 1.4s;"></div>
                        <div class="dust-particle" style="left: 48%; top: 25%; animation-delay: 1.7s;"></div>
                        <div class="dust-particle" style="left: 53%; top: 60%; animation-delay: 2s;"></div>
                        <div class="dust-particle" style="left: 58%; top: 35%; animation-delay: 2.3s;"></div>
                        <div class="dust-particle" style="left: 63%; top: 65%; animation-delay: 2.6s;"></div>
                        <div class="dust-particle" style="left: 68%; top: 30%; animation-delay: 2.9s;"></div>
                        <div class="dust-particle" style="left: 73%; top: 60%; animation-delay: 3.2s;"></div>
                        <div class="dust-particle" style="left: 78%; top: 40%; animation-delay: 3.5s;"></div>
                        
                        <!-- 第三批粒子 -->
                        <div class="dust-particle" style="left: 18%; top: 42%; animation-delay: 0.1s;"></div>
                        <div class="dust-particle" style="left: 24%; top: 58%; animation-delay: 0.4s;"></div>
                        <div class="dust-particle" style="left: 29%; top: 38%; animation-delay: 0.7s;"></div>
                        <div class="dust-particle" style="left: 34%; top: 52%; animation-delay: 1s;"></div>
                        <div class="dust-particle" style="left: 39%; top: 46%; animation-delay: 1.3s;"></div>
                        <div class="dust-particle" style="left: 44%; top: 62%; animation-delay: 1.6s;"></div>
                        <div class="dust-particle" style="left: 49%; top: 33%; animation-delay: 1.9s;"></div>
                        <div class="dust-particle" style="left: 54%; top: 48%; animation-delay: 2.2s;"></div>
                        <div class="dust-particle" style="left: 59%; top: 56%; animation-delay: 2.5s;"></div>
                        <div class="dust-particle" style="left: 64%; top: 44%; animation-delay: 2.8s;"></div>
                        <div class="dust-particle" style="left: 69%; top: 38%; animation-delay: 3.1s;"></div>
                        <div class="dust-particle" style="left: 74%; top: 52%; animation-delay: 3.4s;"></div>
                        
                        <!-- 第四批粒子 -->
                        <div class="dust-particle" style="left: 16%; top: 36%; animation-delay: 0.15s;"></div>
                        <div class="dust-particle" style="left: 21%; top: 54%; animation-delay: 0.45s;"></div>
                        <div class="dust-particle" style="left: 26%; top: 41%; animation-delay: 0.75s;"></div>
                        <div class="dust-particle" style="left: 31%; top: 57%; animation-delay: 1.05s;"></div>
                        <div class="dust-particle" style="left: 36%; top: 43%; animation-delay: 1.35s;"></div>
                        <div class="dust-particle" style="left: 41%; top: 59%; animation-delay: 1.65s;"></div>
                        <div class="dust-particle" style="left: 46%; top: 37%; animation-delay: 1.95s;"></div>
                        <div class="dust-particle" style="left: 51%; top: 53%; animation-delay: 2.25s;"></div>
                        <div class="dust-particle" style="left: 56%; top: 41%; animation-delay: 2.55s;"></div>
                        <div class="dust-particle" style="left: 61%; top: 47%; animation-delay: 2.85s;"></div>
                        <div class="dust-particle" style="left: 66%; top: 53%; animation-delay: 3.15s;"></div>
                        <div class="dust-particle" style="left: 71%; top: 39%; animation-delay: 3.45s;"></div>
                    </div>
                </div>
                
                <!-- 控制按鈕 -->
                <div class="dust-controls">
                    <button class="dust-btn" onclick="toggleDust()">✨ 拍打板擦</button>
                    <button class="dust-btn" onclick="toggleSunlight()">☀️ 陽光照射</button>
                    <button class="dust-btn" onclick="resetScene()">🔄 重置場景</button>
                </div>
                
                <!-- 狀態指示 -->
                <div class="scene-status" id="sceneStatus">
                    <div class="status-text">點擊按鈕開始實驗！</div>
                </div>
            </div>
            
            <!-- 動態解釋 -->
            <div class="dynamic-explanation" id="dustExplanation">
                <h3>🔬 光線可見性原理</h3>
                <p id="dustExplanationText">
                    <strong>💡 為什麼平時看不見光線？</strong><br>
                    • 光線本身是無形的，只有當光線照射到物體並反射到我們眼中時才能被看見<br>
                    • 在乾淨的空氣中，光線直接穿過，沒有東西可以反射光線<br>
                    • 試試看拍打板擦或打開陽光，觀察會發生什麼變化！
                </p>
            </div>
            
            <div class="explanation">
                <h3>🧠 科學原理詳解</h3>
                <p><strong>光線的可見性原理：</strong></p>
                <p>• <strong>正常情況：</strong>光線在乾淨空氣中是看不見的</p>
                <p>• <strong>有灰塵時：</strong>光線照射到灰塵粒子，灰塵將光線散射到各個方向</p>
                <p>• <strong>散射效應：</strong>散射的光線進入我們的眼睛，讓我們看見光線的路徑</p>
                <p><strong>🏫 生活實例：</strong>教室裡拍打板擦、霧天的車燈、投影機的光束等</p>
            </div>
        </div>
    </div>

    <script>
        let flashlightOn = false;
        let isNight = false;
        let lightOn = false;
        let dustVisible = false;
        let sunlightOn = false;

        function toggleFlashlight() {
            const scene = document.getElementById('flashlightScene');
            const button = document.querySelector('.flashlight-button');
            
            flashlightOn = !flashlightOn;
            
            if (flashlightOn) {
                scene.classList.add('flashlight-on');
                button.textContent = '🔦 關閉手電筒';
                button.style.background = '#4caf50';
            } else {
                scene.classList.remove('flashlight-on');
                button.textContent = '🔦 按下手電筒';
                button.style.background = '#ff6b6b';
            }
        }

        function updateExplanation() {
            const explanationText = document.getElementById('explanationText');
            
            if (!isNight) {
                // 白天模式
                explanationText.innerHTML = `
                    <strong>☀️ 白天模式：</strong><br>
                    • 太陽光充足，光線從各個方向照射<br>
                    • 富豪和小偷都能清楚看見彼此<br>
                    • 這時候小偷很容易被發現，所以他很緊張！<br>
                    • <em>科學原理：充足的環境光讓所有物體都能被看見</em>
                `;
            } else if (!lightOn) {
                // 夜晚無燈模式
                explanationText.innerHTML = `
                    <strong>🌙 夜晚無燈模式：</strong><br>
                    • 沒有光源，環境一片漆黑<br>
                    • 富豪和小偷都看不見對方<br>
                    • 小偷覺得很安全，富豪準備休息<br>
                    • <em>科學原理：沒有光線就沒有視覺，雙方都「隱形」了</em>
                `;
            } else {
                // 夜晚開燈模式
                explanationText.innerHTML = `
                    <strong>💡 夜晚開燈模式：</strong><br>
                    • 室內燈光照亮富豪，光線透過窗戶向外傳播<br>
                    • 小偷能看見明亮室內的富豪（有光源）<br>
                    • 富豪看不見黑暗中的小偷（室外無光源）<br>
                    • <em>科學原理：光線的單向性造成「單向視覺」效果</em><br>
                    • <strong>🏠 生活應用：</strong>這就是為什麼晚上在明亮室內很難看清窗外！
                `;
            }
        }

        function updateThoughtBubbles() {
            // 隱藏所有對話框
            document.querySelectorAll('.thought-bubble').forEach(bubble => {
                bubble.style.opacity = '0';
            });

            // 根據狀態顯示對應的對話框
            setTimeout(() => {
                if (!isNight) {
                    // 白天
                    document.getElementById('richDayThought').style.opacity = '1';
                    document.getElementById('robberDayThought').style.opacity = '1';
                } else if (!lightOn) {
                    // 夜晚無燈
                    document.getElementById('richNightThought').style.opacity = '1';
                    document.getElementById('robberNightThought').style.opacity = '1';
                } else {
                    // 夜晚開燈
                    document.getElementById('richLitThought').style.opacity = '1';
                    document.getElementById('robberLitThought').style.opacity = '1';
                }
            }, 300);
        }

        function setTime(time) {
            const scene = document.getElementById('villaScene');
            const villa = document.getElementById('villa');
            const grassLight = document.getElementById('grassLight');
            const buttons = document.querySelectorAll('.control-btn');
            
            // 重置按鈕狀態
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (time === 'night') {
                isNight = true;
                scene.classList.add('night');
                buttons[1].classList.add('active');
                
                // 夜晚時如果沒開燈，移除lit類別
                if (!lightOn) {
                    villa.classList.remove('lit');
                    grassLight.style.background = 'transparent';
                }
            } else {
                isNight = false;
                lightOn = false; // 白天時重置燈光狀態
                scene.classList.remove('night');
                villa.classList.remove('lit');
                grassLight.style.background = 'transparent';
                buttons[0].classList.add('active');
                buttons[2].textContent = '💡 開燈';
                buttons[2].classList.remove('active');
            }
            
            updateExplanation();
            updateThoughtBubbles();
        }

        function toggleLight() {
            const villa = document.getElementById('villa');
            const grassLight = document.getElementById('grassLight');
            const button = document.querySelectorAll('.control-btn')[2];
            
            if (!isNight) {
                alert('白天不需要開燈喔！先切換到夜晚模式試試看。');
                return;
            }
            
            lightOn = !lightOn;
            
            if (lightOn) {
                villa.classList.add('lit');
                grassLight.style.background = 'radial-gradient(ellipse at center top, rgba(255, 245, 183, 0.3) 0%, rgba(255, 245, 183, 0.1) 50%, transparent 100%)';
                button.textContent = '💡 關燈';
                button.classList.add('active');
            } else {
                villa.classList.remove('lit');
                grassLight.style.background = 'transparent';
                button.textContent = '💡 開燈';
                button.classList.remove('active');
            }
            
            updateExplanation();
            updateThoughtBubbles();
        }

        // 光線檢測功能 - 檢查粒子是否在光線範圍內
        function checkParticleInLight() {
            if (!dustVisible || !sunlightOn) {
                // 如果沒有灰塵或沒有陽光，移除所有發光效果
                document.querySelectorAll('.dust-particle').forEach(particle => {
                    particle.classList.remove('in-light');
                });
                return;
            }

            const particles = document.querySelectorAll('.dust-particle');
            particles.forEach(particle => {
                const rect = particle.getBoundingClientRect();
                const sceneRect = document.getElementById('dustScene').getBoundingClientRect();
                
                // 計算粒子相對於場景的位置
                const relativeX = (rect.left + rect.width/2 - sceneRect.left) / sceneRect.width;
                const relativeY = (rect.top + rect.height/2 - sceneRect.top) / sceneRect.height;
                
                // 光線路徑範圍 (從窗戶斜射進來的光束範圍)
                // 光線從右上角 (0.75, 0.15) 斜射到左下角 (0.15, 0.85)
                const lightStartX = 0.75;
                const lightStartY = 0.15;
                const lightEndX = 0.15;
                const lightEndY = 0.85;
                const lightWidth = 0.25; // 光束寬度
                
                // 計算粒子到光線中心軸的距離
                const lightCenterX = lightStartX + (lightEndX - lightStartX) * relativeY;
                const distanceFromLightCenter = Math.abs(relativeX - lightCenterX);
                
                // 檢查粒子是否在光線範圍內
                const isInLightPath = relativeY >= lightStartY && 
                                    relativeY <= lightEndY && 
                                    distanceFromLightCenter <= lightWidth / 2;
                
                if (isInLightPath) {
                    particle.classList.add('in-light');
                } else {
                    particle.classList.remove('in-light');
                }
            });
        }

        // 定期檢查粒子位置 (因為粒子在移動)
        let lightCheckInterval;

        function startLightCheck() {
            if (lightCheckInterval) clearInterval(lightCheckInterval);
            lightCheckInterval = setInterval(checkParticleInLight, 100); // 每100ms檢查一次
        }

        function stopLightCheck() {
            if (lightCheckInterval) {
                clearInterval(lightCheckInterval);
                lightCheckInterval = null;
            }
        }

        // 實驗三的功能
        function updateDustExplanation() {
            const dustExplanationText = document.getElementById('dustExplanationText');
            const statusText = document.querySelector('.status-text');
            
            if (!dustVisible && !sunlightOn) {
                // 初始狀態
                dustExplanationText.innerHTML = `
                    <strong>💡 為什麼平時看不見光線？</strong><br>
                    • 光線本身是無形的，只有當光線照射到物體並反射到我們眼中時才能被看見<br>
                    • 在乾淨的空氣中，光線直接穿過，沒有東西可以反射光線<br>
                    • 試試看拍打板擦或打開陽光，觀察會發生什麼變化！
                `;
                statusText.textContent = '點擊按鈕開始實驗！';
            } else if (dustVisible && !sunlightOn) {
                // 只有灰塵
                dustExplanationText.innerHTML = `
                    <strong>✨ 粉筆灰出現了！</strong><br>
                    • 拍打板擦產生了大量微小的粉筆灰粒子<br>
                    • 但是沒有強烈的光源，所以還看不到光線路徑<br>
                    • 現在試試打開陽光，看看會發生什麼神奇的事情！
                `;
                statusText.textContent = '粉筆灰飄散中...再試試陽光！';
            } else if (!dustVisible && sunlightOn) {
                // 只有陽光
                dustExplanationText.innerHTML = `
                    <strong>☀️ 陽光照射進來了！</strong><br>
                    • 強烈的陽光從窗戶照射進教室<br>
                    • 但是空氣很乾淨，沒有灰塵粒子可以散射光線<br>
                    • 所以我們看不到光線的路徑，試試拍打板擦！
                `;
                statusText.textContent = '陽光明亮但看不見光線...';
            } else {
                // 灰塵 + 陽光
                dustExplanationText.innerHTML = `
                    <strong>🌟 太神奇了！光線變得可見了！</strong><br>
                    • 只有在光線路徑上的灰塵粒子會發光並散射光線<br>
                    • 光線路徑外的灰塵保持灰色，因為沒有被光線照射到<br>
                    • 被照射的灰塵將光線散射到各個方向（瑞利散射）<br>
                    • 散射的光線進入我們的眼睛，讓我們看見了光線的路徑！<br>
                    • <strong>🔬 這就是為什麼霧天能看見車燈光束的原理！</strong>
                `;
                statusText.textContent = '完美！光線路徑清晰可見！';
            }
        }

        function toggleDust() {
            const dustParticles = document.getElementById('dustParticles');
            const button = document.querySelectorAll('.dust-btn')[0];
            
            dustVisible = !dustVisible;
            
            if (dustVisible) {
                dustParticles.classList.add('visible');
                button.classList.add('active');
                button.textContent = '✨ 停止拍打';
                
                // 重新觸發動畫
                const particles = dustParticles.querySelectorAll('.dust-particle');
                particles.forEach(particle => {
                    particle.style.animation = 'none';
                    particle.offsetHeight; // 觸發重排
                    particle.style.animation = 'dustFloat 12s infinite linear';
                });
                
                // 開始光線檢測
                startLightCheck();
            } else {
                dustParticles.classList.remove('visible');
                button.classList.remove('active');
                button.textContent = '✨ 拍打板擦';
                
                // 停止光線檢測
                stopLightCheck();
            }
            
            updateDustExplanation();
        }

        function toggleSunlight() {
            const sunlightBeam = document.getElementById('sunlightBeam');
            const dustParticles = document.getElementById('dustParticles');
            const button = document.querySelectorAll('.dust-btn')[1];
            
            sunlightOn = !sunlightOn;
            
            if (sunlightOn) {
                sunlightBeam.classList.add('active');
                dustParticles.classList.add('sunlight-active');
                button.classList.add('active');
                button.textContent = '☀️ 關閉陽光';
                
                // 如果灰塵已經可見，開始光線檢測
                if (dustVisible) {
                    startLightCheck();
                }
            } else {
                sunlightBeam.classList.remove('active');
                dustParticles.classList.remove('sunlight-active');
                button.classList.remove('active');
                button.textContent = '☀️ 陽光照射';
                
                // 移除所有發光效果
                document.querySelectorAll('.dust-particle').forEach(particle => {
                    particle.classList.remove('in-light');
                });
            }
            
            updateDustExplanation();
        }

        function resetScene() {
            const dustParticles = document.getElementById('dustParticles');
            const sunlightBeam = document.getElementById('sunlightBeam');
            const buttons = document.querySelectorAll('.dust-btn');
            
            // 重置所有狀態
            dustVisible = false;
            sunlightOn = false;
            
            // 停止光線檢測
            stopLightCheck();
            
            // 重置視覺效果
            dustParticles.classList.remove('visible');
            dustParticles.classList.remove('sunlight-active');
            sunlightBeam.classList.remove('active');
            
            // 移除所有發光效果
            document.querySelectorAll('.dust-particle').forEach(particle => {
                particle.classList.remove('in-light');
            });
            
            // 重置按鈕
            buttons.forEach(btn => btn.classList.remove('active'));
            buttons[0].textContent = '✨ 拍打板擦';
            buttons[1].textContent = '☀️ 陽光照射';
            
            updateDustExplanation();
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            setTime('day');
            updateDustExplanation();
        });

        // 點擊手電筒場景也能切換
        document.getElementById('flashlightScene').addEventListener('click', function(e) {
            if (e.target.classList.contains('flashlight-scene')) {
                toggleFlashlight();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'985bda6e64f14a54',t:'MTc1ODk4NTA0NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
